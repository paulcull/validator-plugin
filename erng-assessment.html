<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entity Resolution & Network Generation Assessment</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Plotly.js (Canvas/WebGL) -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

    <style>
        /* --- Chosen Palette: Warm Neutrals & Earth Tones --- */
        /* Background: #fafaf9 (Stone 50) */
        /* Cards: #ffffff */
        /* Text Main: #44403c (Stone 700) */
        /* Accents: #a16207 (Ochre), #4d7c0f (Olive), #be123c (Rose) */
        
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #fafaf9;
            color: #44403c;
            line-height: 1.6;
        }

        h1, h2, h3, h4 {
            font-family: 'Merriweather', serif;
            color: #292524;
        }

        /* --- Chart Container Logic (Mandatory) --- */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e7e5e4;
        }
        ::-webkit-scrollbar-thumb {
            background: #a8a29e;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #78716c;
        }

        /* Navigation Active State */
        .nav-item.active {
            border-bottom: 3px solid #a16207;
            color: #292524;
            font-weight: 600;
        }

        /* Card Hover Effect */
        .info-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Button Styles */
        .btn-primary {
            background-color: #44403c;
            color: #fafaf9;
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background-color: #292524;
        }
        .btn-outline {
            border: 1px solid #d6d3d1;
            color: #57534e;
        }
        .btn-outline:hover {
            background-color: #f5f5f4;
            border-color: #a8a29e;
        }
    </style>
    
    <!-- Application Structure Plan:
         1. Header/Intro: Defining the problem scope (ER + Network Gen).
         2. Market Landscape: Doughnut chart showing adoption trends.
         3. Strategic Analysis (Tabs): Radar chart comparing Commercial vs Open Source on 5 axes.
         4. Contender Deep Dive: Dynamic Bar charts for specific top tools (Senzing vs Splink).
         5. Network Generation Demo: Interactive Plotly graph showing the "after" state of ER.
         6. Verdict: Summary cards with recommendations.
         Rationale: This structure moves from high-level context -> comparative analysis -> specific tools -> visual outcome -> final conclusion, aiding the user's decision-making process.
    -->
    
    <!-- Visualization & Content Choices:
         1. Doughnut Chart: Market Share. Goal: Inform/Organize current landscape.
         2. Radar Chart: Commercial vs OS strengths. Goal: Compare along multiple qualitative axes.
         3. Bar Charts: Contender specific scores. Goal: Compare detailed metrics.
         4. Plotly Network Graph: Visualizing Entity Relationships. Goal: Relationships/Wow Factor. 
         5. Flow Diagram: HTML/CSS pipeline. Goal: Organize process steps.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- Chosen Palette: Warm Neutrals (Stone, Ochre, Olive) -->
</head>
<body class="bg-stone-50">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur border-b border-stone-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-serif font-bold text-stone-800 tracking-tight">Data<span class="text-yellow-700">Coherence</span></span>
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <button onclick="scrollToSection('intro')" class="nav-item active px-3 py-2 text-sm text-stone-600 hover:text-stone-900">Context</button>
                    <button onclick="scrollToSection('landscape')" class="nav-item px-3 py-2 text-sm text-stone-600 hover:text-stone-900">Market</button>
                    <button onclick="scrollToSection('comparison')" class="nav-item px-3 py-2 text-sm text-stone-600 hover:text-stone-900">Analysis</button>
                    <button onclick="scrollToSection('network')" class="nav-item px-3 py-2 text-sm text-stone-600 hover:text-stone-900">Network Gen</button>
                    <button onclick="scrollToSection('verdict')" class="nav-item px-3 py-2 text-sm text-stone-600 hover:text-stone-900">Verdict</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-16">

        <!-- Section 1: Introduction -->
        <section id="intro" class="text-center space-y-6 animate-fade-in">
            <h1 class="text-4xl md:text-5xl font-bold text-stone-800 leading-tight">
                The State of <span class="text-yellow-700">Entity Resolution</span> & <span class="text-lime-700">Network Generation</span>
            </h1>
            <p class="max-w-3xl mx-auto text-lg text-stone-600 leading-relaxed">
                In an era of fragmented data, knowing "who is who" (Entity Resolution) and "who knows whom" (Network Generation) is the foundation of modern analytics. This report assesses the trade-offs between <strong>Commercial Platforms</strong> and <strong>Open Source Libraries</strong> to help you choose the right tool for your data infrastructure.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-100">
                    <div class="text-3xl mb-2">üß©</div>
                    <h3 class="font-bold text-stone-800">Entity Resolution</h3>
                    <p class="text-sm text-stone-500 mt-2">The process of identifying records that refer to the same real-world entity across different data sources.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-100">
                    <div class="text-3xl mb-2">üï∏Ô∏è</div>
                    <h3 class="font-bold text-stone-800">Network Gen</h3>
                    <p class="text-sm text-stone-500 mt-2">Connecting resolved entities into a graph structure to reveal hidden relationships and non-obvious links.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-100">
                    <div class="text-3xl mb-2">‚öñÔ∏è</div>
                    <h3 class="font-bold text-stone-800">The Dilemma</h3>
                    <p class="text-sm text-stone-500 mt-2">Build vs. Buy. Do you prioritize speed and support, or control and cost-efficiency?</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Market Landscape -->
        <section id="landscape" class="bg-white rounded-xl shadow-sm border border-stone-200 p-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div class="space-y-4">
                    <div class="border-l-4 border-yellow-600 pl-4">
                        <h2 class="text-2xl font-bold text-stone-800">The Shifting Landscape</h2>
                        <p class="text-stone-500 text-sm uppercase tracking-wide">Market Adoption Trends</p>
                    </div>
                    <p class="text-stone-600">
                        Traditionally, organizations relied on fragile, in-house SQL scripts. The market is now bifurcating: enterprises with strict compliance needs are moving to sophisticated <strong>Commercial COTS</strong> (Commercial Off-The-Shelf) solutions, while tech-forward companies are embracing <strong>Probabilistic Open Source</strong> libraries that run natively on modern data warehouses.
                    </p>
                    <ul class="space-y-3 mt-4">
                        <li class="flex items-start">
                            <span class="text-lime-600 mr-2">‚úì</span>
                            <span class="text-stone-600 text-sm"><strong>Commercial:</strong> Dominated by Banking, Gov, and Insurance.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-lime-600 mr-2">‚úì</span>
                            <span class="text-stone-600 text-sm"><strong>Open Source:</strong> Growing in Tech, Startups, and Data Science teams.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-red-400 mr-2">‚ö†</span>
                            <span class="text-stone-600 text-sm"><strong>Legacy:</strong> Rule-based systems are declining due to maintenance costs.</span>
                        </li>
                    </ul>
                </div>
                
                <div class="flex flex-col items-center">
                    <h3 class="text-stone-700 font-semibold mb-4">Current Deployment Strategies</h3>
                    <div class="chart-container">
                        <canvas id="marketChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Comparative Analysis (Interactive) -->
        <section id="comparison" class="space-y-8">
            <div class="text-center max-w-2xl mx-auto">
                <h2 class="text-3xl font-bold text-stone-800">Commercial vs. Open Source</h2>
                <p class="text-stone-600 mt-2">
                    An in-depth assessment of the five critical dimensions of deployment. Toggle the tabs below to explore specific tools.
                </p>
            </div>

            <div class="bg-white rounded-xl shadow-lg border border-stone-200 overflow-hidden">
                <!-- Tabs -->
                <div class="flex border-b border-stone-200 bg-stone-50">
                    <button onclick="switchTab('overview')" id="tab-overview" class="flex-1 py-4 text-center font-semibold text-stone-800 border-b-2 border-yellow-600 bg-white hover:bg-stone-50 transition">Strategic Overview</button>
                    <button onclick="switchTab('contenders')" id="tab-contenders" class="flex-1 py-4 text-center font-semibold text-stone-500 border-b-2 border-transparent hover:text-stone-700 hover:bg-stone-100 transition">Top Contenders Details</button>
                </div>

                <div class="p-8">
                    <!-- Tab Content: Strategic Overview (Radar) -->
                    <div id="view-overview" class="block animate-fade-in">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                            <div class="chart-container">
                                <canvas id="radarChart"></canvas>
                            </div>
                            <div class="space-y-6 flex flex-col justify-center">
                                <div class="p-4 bg-yellow-50 rounded-lg border border-yellow-100">
                                    <h4 class="font-bold text-yellow-800 mb-2">Commercial Profile</h4>
                                    <p class="text-sm text-stone-600">
                                        Focuses on <strong>Speed to Value</strong> and reliability. You pay for the "black box" engine that just works. High support, low maintenance, but high licensing costs.
                                    </p>
                                </div>
                                <div class="p-4 bg-lime-50 rounded-lg border border-lime-100">
                                    <h4 class="font-bold text-lime-800 mb-2">Open Source Profile</h4>
                                    <p class="text-sm text-stone-600">
                                        Focuses on <strong>Transparency</strong> and flexibility. You own the model and the data pipe. Extremely cost-effective (free license), but requires significant engineering effort to tune.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab Content: Contenders (Bar Charts) -->
                    <div id="view-contenders" class="hidden animate-fade-in">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                            <!-- Commercial: Senzing/Quantexa -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="font-bold text-lg text-stone-800">Commercial Leader: <span class="text-yellow-700">Senzing</span></h3>
                                    <span class="px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded">API-First</span>
                                </div>
                                <div class="chart-container" style="height: 250px;">
                                    <canvas id="commercialBar"></canvas>
                                </div>
                                <p class="text-xs text-stone-500 mt-4 italic">
                                    "Entity Resolution as a Service." Minimal tuning required. Best for real-time applications.
                                </p>
                            </div>

                            <!-- Open Source: Splink -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="font-bold text-lg text-stone-800">Open Source Leader: <span class="text-lime-700">Splink</span></h3>
                                    <span class="px-2 py-1 text-xs font-semibold bg-lime-100 text-lime-800 rounded">Python/SQL</span>
                                </div>
                                <div class="chart-container" style="height: 250px;">
                                    <canvas id="osBar"></canvas>
                                </div>
                                <p class="text-xs text-stone-500 mt-4 italic">
                                    Developed by UK Ministry of Justice. Fast, scalable probabilistic linking on DuckDB/Spark.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Network Generation Visualizer -->
        <section id="network" class="space-y-6">
            <div class="flex flex-col md:flex-row justify-between items-end border-b border-stone-300 pb-4">
                <div class="max-w-2xl">
                    <h2 class="text-2xl font-bold text-stone-800">From Resolution to <span class="text-rose-600">Network Generation</span></h2>
                    <p class="text-stone-600 mt-2">
                        Entity Resolution is the <i>start</i>. Network Generation is the <i>goal</i>. By linking resolved entities via shared attributes (phone, address, email), we build a <strong>Knowledge Graph</strong> that reveals organized crime rings, fraud networks, or household marketing opportunities.
                    </p>
                </div>
                <div class="mt-4 md:mt-0">
                    <button id="toggleNetworkBtn" class="btn-primary px-6 py-2 rounded-lg font-semibold shadow-md text-sm">
                        Simulate Connection
                    </button>
                </div>
            </div>

            <!-- Plotly Container -->
            <div class="bg-stone-900 rounded-xl shadow-inner p-4 border border-stone-800 relative">
                <div class="absolute top-4 left-4 z-10 bg-black/50 p-2 rounded text-xs text-stone-300">
                    <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-rose-500"></div> Persons</div>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-cyan-500"></div> Companies</div>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-stone-500"></div> Shared Data</div>
                </div>
                <div id="networkGraph" style="width: 100%; height: 500px;"></div>
                <div class="text-center text-stone-500 text-xs mt-2">
                    Interactive Canvas: Zoom, Pan, and Hover to explore relationships.
                </div>
            </div>
            
            <!-- Process Flow -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-8">
                <div class="p-4 bg-white border-l-4 border-stone-300 rounded shadow-sm">
                    <h4 class="font-bold text-sm text-stone-700">1. Ingest</h4>
                    <p class="text-xs text-stone-500 mt-1">Raw data from CRM, Web, Logs.</p>
                </div>
                <div class="p-4 bg-white border-l-4 border-yellow-500 rounded shadow-sm">
                    <h4 class="font-bold text-sm text-stone-700">2. Resolve (ER)</h4>
                    <p class="text-xs text-stone-500 mt-1">Identify "J. Doe" == "John Doe".</p>
                </div>
                <div class="p-4 bg-white border-l-4 border-lime-500 rounded shadow-sm">
                    <h4 class="font-bold text-sm text-stone-700">3. Link (Edges)</h4>
                    <p class="text-xs text-stone-500 mt-1">Connect via shared attributes.</p>
                </div>
                <div class="p-4 bg-white border-l-4 border-rose-500 rounded shadow-sm">
                    <h4 class="font-bold text-sm text-stone-700">4. Graph</h4>
                    <p class="text-xs text-stone-500 mt-1">Traverse network for insights.</p>
                </div>
            </div>
        </section>

        <!-- Section 5: Verdict & Recommendations -->
        <section id="verdict" class="py-8">
            <h2 class="text-3xl font-bold text-center text-stone-800 mb-10">Final Verdict & Recommendations</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Commercial Rec -->
                <div class="bg-white rounded-xl shadow-lg border border-yellow-200 overflow-hidden info-card group">
                    <div class="bg-yellow-50 p-6 border-b border-yellow-100">
                        <div class="flex justify-between items-start">
                            <h3 class="text-xl font-bold text-stone-800">Best Commercial Choice</h3>
                            <span class="text-2xl">üèÜ</span>
                        </div>
                        <div class="mt-2 text-yellow-800 font-bold text-2xl">Senzing</div>
                    </div>
                    <div class="p-6 space-y-4">
                        <p class="text-stone-600 text-sm">
                            Senzing stands out for its "Entity Resolution 2.0" approach. It requires zero training (no ML model building) and improves recursively as new data arrives.
                        </p>
                        <ul class="text-sm text-stone-500 space-y-2">
                            <li><strong>Best For:</strong> Enterprise, Fraud Detection, Real-time APIs.</li>
                            <li><strong>Trade-off:</strong> High TCO, proprietary lock-in.</li>
                        </ul>
                    </div>
                </div>

                <!-- OS Rec -->
                <div class="bg-white rounded-xl shadow-lg border border-lime-200 overflow-hidden info-card group">
                    <div class="bg-lime-50 p-6 border-b border-lime-100">
                        <div class="flex justify-between items-start">
                            <h3 class="text-xl font-bold text-stone-800">Best Open Source Choice</h3>
                            <span class="text-2xl">üõ†Ô∏è</span>
                        </div>
                        <div class="mt-2 text-lime-800 font-bold text-2xl">Splink</div>
                    </div>
                    <div class="p-6 space-y-4">
                        <p class="text-stone-600 text-sm">
                            A Python library for probabilistic record linkage (Fellegi-Sunter model). It runs SQL against DuckDB or Spark, making it incredibly fast and scalable for batch processing.
                        </p>
                        <ul class="text-sm text-stone-500 space-y-2">
                            <li><strong>Best For:</strong> Data Science Teams, Analytical Workloads, Cost-Sensitive Projects.</li>
                            <li><strong>Trade-off:</strong> Requires Python/SQL engineering skills.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <footer class="mt-12 border-t border-stone-200 pt-8 pb-12 text-center text-stone-400 text-sm">
            <p>¬© 2024 Entity Resolution Research Assessment. Generated by Canvas SPA.</p>
        </footer>

    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- Navigation Logic ---
        function scrollToSection(id) {
            const element = document.getElementById(id);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
                // Update active state
                document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
            }
        }

        // --- Tab Logic ---
        function switchTab(viewId) {
            // Hide all views
            document.getElementById('view-overview').classList.add('hidden');
            document.getElementById('view-contenders').classList.add('hidden');
            
            // Show selected view
            document.getElementById('view-' + viewId).classList.remove('hidden');

            // Update Header Styles
            const btnOverview = document.getElementById('tab-overview');
            const btnContenders = document.getElementById('tab-contenders');

            if (viewId === 'overview') {
                btnOverview.classList.add('border-b-2', 'border-yellow-600', 'bg-white', 'text-stone-800');
                btnOverview.classList.remove('text-stone-500', 'border-transparent');
                
                btnContenders.classList.remove('border-b-2', 'border-yellow-600', 'bg-white', 'text-stone-800');
                btnContenders.classList.add('text-stone-500', 'border-transparent');
            } else {
                btnContenders.classList.add('border-b-2', 'border-yellow-600', 'bg-white', 'text-stone-800');
                btnContenders.classList.remove('text-stone-500', 'border-transparent');

                btnOverview.classList.remove('border-b-2', 'border-yellow-600', 'bg-white', 'text-stone-800');
                btnOverview.classList.add('text-stone-500', 'border-transparent');
            }
        }

        // --- Chart Helper: Label Splitting ---
        function splitLabel(label) {
            if (typeof label !== 'string') return label;
            if (label.length <= 16) return label;
            const words = label.split(' ');
            const lines = [];
            let currentLine = words[0];
            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= 16) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        const commonTooltip = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) return label.join(' ');
                    return label;
                }
            }
        };

        // --- CHART 1: Market Landscape (Doughnut) ---
        const ctxMarket = document.getElementById('marketChart').getContext('2d');
        new Chart(ctxMarket, {
            type: 'doughnut',
            data: {
                labels: ['Commercial Solutions', 'Open Source', 'Legacy / In-House', 'Manual / None'].map(splitLabel),
                datasets: [{
                    data: [35, 25, 30, 10],
                    backgroundColor: [
                        '#a16207', // Ochre (Comm)
                        '#4d7c0f', // Olive (OS)
                        '#a8a29e', // Stone (Legacy)
                        '#e7e5e4'  // Light Stone
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20 } },
                    tooltip: commonTooltip
                },
                cutout: '70%'
            }
        });

        // --- CHART 2: Radar Comparison ---
        const ctxRadar = document.getElementById('radarChart').getContext('2d');
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: ['Deployment Speed', 'Cost Efficiency', 'Customizability', 'Scalability', 'Support Quality'].map(splitLabel),
                datasets: [{
                    label: 'Commercial',
                    data: [9, 3, 4, 9, 10],
                    fill: true,
                    backgroundColor: 'rgba(161, 98, 7, 0.2)',
                    borderColor: '#a16207',
                    pointBackgroundColor: '#a16207'
                }, {
                    label: 'Open Source',
                    data: [4, 10, 10, 8, 3],
                    fill: true,
                    backgroundColor: 'rgba(77, 124, 15, 0.2)',
                    borderColor: '#4d7c0f',
                    pointBackgroundColor: '#4d7c0f'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: '#e7e5e4' },
                        grid: { color: '#e7e5e4' },
                        pointLabels: { font: { size: 12 } },
                        suggestedMin: 0,
                        suggestedMax: 10
                    }
                },
                plugins: {
                    tooltip: commonTooltip
                }
            }
        });

        // --- CHART 3: Commercial Bar ---
        new Chart(document.getElementById('commercialBar').getContext('2d'), {
            type: 'bar',
            data: {
                labels: ['Accuracy', 'Speed', 'Ease of Use', 'Integration'].map(splitLabel),
                datasets: [{
                    label: 'Senzing Score',
                    data: [9.5, 9.8, 9.0, 8.5],
                    backgroundColor: '#a16207',
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { max: 10, grid: { display: false } },
                    y: { grid: { display: false } }
                },
                plugins: { legend: { display: false }, tooltip: commonTooltip }
            }
        });

        // --- CHART 4: Open Source Bar ---
        new Chart(document.getElementById('osBar').getContext('2d'), {
            type: 'bar',
            data: {
                labels: ['Accuracy', 'Speed', 'Ease of Use', 'Integration'].map(splitLabel),
                datasets: [{
                    label: 'Splink Score',
                    data: [9.0, 8.5, 6.5, 7.0],
                    backgroundColor: '#4d7c0f',
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { max: 10, grid: { display: false } },
                    y: { grid: { display: false } }
                },
                plugins: { legend: { display: false }, tooltip: commonTooltip }
            }
        });

        // --- CHART 5: Plotly Network Graph ---
        // Setup initial data
        const nodeCount = 30;
        const initialX = Array.from({length: nodeCount}, () => Math.random() * 10);
        const initialY = Array.from({length: nodeCount}, () => Math.random() * 10);
        const colors = initialX.map((_, i) => i % 3 === 0 ? '#be123c' : (i % 3 === 1 ? '#06b6d4' : '#78716c')); // Rose, Cyan, Stone
        
        let traceNodes = {
            x: initialX,
            y: initialY,
            mode: 'markers',
            type: 'scattergl',
            name: 'Entities',
            marker: { size: 12, color: colors, line: { color: 'white', width: 1 } },
            text: initialX.map((_, i) => `Entity ${i}`),
            hoverinfo: 'text'
        };

        // No edges initially
        let traceEdges = {
            x: [],
            y: [],
            mode: 'lines',
            type: 'scattergl',
            line: { color: 'rgba(255, 255, 255, 0.1)', width: 1 },
            hoverinfo: 'none'
        };

        const layoutNetwork = {
            plot_bgcolor: 'rgba(0,0,0,0)',
            paper_bgcolor: 'rgba(0,0,0,0)',
            showlegend: false,
            xaxis: { showgrid: false, zeroline: false, showticklabels: false },
            yaxis: { showgrid: false, zeroline: false, showticklabels: false },
            margin: { l: 0, r: 0, b: 0, t: 0 },
            dragmode: 'pan'
        };

        const configNetwork = { responsive: true, displayModeBar: false };
        
        Plotly.newPlot('networkGraph', [traceEdges, traceNodes], layoutNetwork, configNetwork);

        // Simulation Logic
        let isConnected = false;
        document.getElementById('toggleNetworkBtn').addEventListener('click', function() {
            const btn = this;
            
            if (!isConnected) {
                // Simulate Connection (Clustering)
                // We will move nodes closer to centers and draw lines
                const clusterCenters = [{x: 2, y: 2}, {x: 8, y: 8}, {x: 2, y: 8}, {x: 8, y: 2}];
                const newX = [];
                const newY = [];
                const edgeX = [];
                const edgeY = [];

                for (let i = 0; i < nodeCount; i++) {
                    const center = clusterCenters[i % 4];
                    // Add some random noise around center
                    const x = center.x + (Math.random() - 0.5) * 2;
                    const y = center.y + (Math.random() - 0.5) * 2;
                    newX.push(x);
                    newY.push(y);

                    // Create edges to center
                    if (Math.random() > 0.3) {
                        edgeX.push(x, center.x, null);
                        edgeY.push(y, center.y, null);
                    }
                }

                // Animate Nodes
                Plotly.animate('networkGraph', {
                    data: [{x: newX, y: newY}, {x: edgeX, y: edgeY, line: {color: 'rgba(168, 162, 158, 0.4)'}}]
                }, {
                    transition: { duration: 1500, easing: 'cubic-in-out' },
                    frame: { duration: 1500 }
                });

                btn.textContent = "Reset View";
                btn.classList.remove('btn-primary');
                btn.classList.add('bg-stone-200', 'text-stone-800');
                isConnected = true;

            } else {
                // Reset to Chaos
                Plotly.animate('networkGraph', {
                    data: [{x: initialX, y: initialY}, {x: [], y: []}]
                }, {
                    transition: { duration: 1000, easing: 'cubic-in-out' },
                    frame: { duration: 1000 }
                });

                btn.textContent = "Simulate Connection";
                btn.classList.add('btn-primary');
                btn.classList.remove('bg-stone-200', 'text-stone-800');
                isConnected = false;
            }
        });

    </script>
</body>
</html>